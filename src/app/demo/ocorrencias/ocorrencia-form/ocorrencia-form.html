<form #ocorrenciaForm="ngForm" fxLayout="column" fxLayoutAlign="start stretch" (ngSubmit)="addOcorrencia()">
  <div class="row">
    <div class="col-sm-12">
      <app-card cardTitle="Nova Ocorrência" [options]="false">
        <h5>Inserir Nova Ocorrência</h5>
        <hr />
        <div class="mb-3">
          <label for="tipoVeiculo" class="form-label">Tipo de Veículo</label>
          <select
            id="tipoVeiculo"
            name="tipoVeiculo"
            class="form-select"
            required
            [(ngModel)]="ocorrencia.tipoVeiculo"
            #tipoVeiculoField="ngModel"
          >
            <option value="" disabled selected>Selecione o tipo</option>
            <option value="1">Carro</option>
            <option value="2">Moto</option>
            <option value="3">Utilitário</option>
          </select>
          <div *ngIf="tipoVeiculoField.invalid && tipoVeiculoField.touched" class="text-danger">Tipo de veículo é obrigatório.</div>
        </div>

        <div class="mb-3">
          <label for="placa" class="form-label">Placa</label>
          <input
            id="placa"
            name="placa"
            type="text"
            class="form-control"
            required
            minlength="7"
            maxlength="7"
            [(ngModel)]="ocorrencia.placa"
            #placaField="ngModel"
            placeholder="ABC1234"
            [disabled]="!!tipoVeiculoField?.invalid"
          />
          <div *ngIf="placaField.invalid && placaField.touched" class="text-danger">A placa deve conter exatamente 7 caracteres.</div>
        </div>

        <p></p>
        <div class="col-12">
          <label for="marca">Marca</label>
          <div class="input-group">
            <input
              id="marca"
              name="marca"
              type="text"
              [(ngModel)]="ocorrencia.marca"
              maxlength="30"
              class="form-control"
              placeholder="Marca"
              [disabled]="!!tipoVeiculoField?.invalid"
            />
          </div>
        </div>
        <p></p>
        <div class="col-12">
          <label for="modelo">Modelo</label>
          <div class="input-group">
            <input
              id="modelo"
              name="modelo"
              type="text"
              [(ngModel)]="ocorrencia.modelo"
              maxlength="30"
              class="form-control"
              placeholder="Modelo"
              [disabled]="!!tipoVeiculoField?.invalid"
            />
          </div>
        </div>
        <p></p>
        <div class="col-12">
          <label for="cor">Cor</label>
          <div class="input-group">
            <input
              id="cor"
              name="cor"
              type="text"
              [(ngModel)]="ocorrencia.cor"
              maxlength="20"
              class="form-control"
              placeholder="Cor"
              [disabled]="!!tipoVeiculoField?.invalid"
            />
          </div>
        </div>
        <p></p>

        <hr />
        <div layout-fill [ngStyle]="{'color': 'white'}">
          <div fxFlex="100" fxLayout="row" fxLayoutAlign="space-between start">
            <input type="file" id="file" mat-input (change)="adicionarFoto($event)" />
          </div>
        </div>
        <hr />
        <div layout-fill [ngStyle]="{'color': 'white'}">
          <div class="container">
            <div class="row justify-content-md-center" *ngIf="fotos.length>0 else fotosVazias">
              <div class="col-md-auto" *ngFor="let foto of fotos;">
                <div class="card" style="width: 250px; height: 250px">
                  <img [src]="foto.nome" class="card-img-top" />
                  <button id="btn_excluir" color="danger" class="btn btn-danger" (click)="excluirFoto(foto)">Excluir</button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <ng-template #fotosVazias>
          <div layout-fill class="row justify-content-md-center" style="max-width: 150px">
            <span>Ainda não existem fotos adicionadas</span>
          </div>
        </ng-template>

        <div class="row">
          <div class="col-md-10">
            <div class="form-group">
              <button type="submit" class="btn btn-primary" [disabled]="ocorrenciaForm.invalid || fotos.length!=1">Registrar</button>
            </div>
          </div>
        </div>
      </app-card>
    </div>
  </div>
</form>
